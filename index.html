<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Be My Valentine? ðŸ’–</title>
    <meta name="description" content="A cute, funny little site to ask you to be my Valentine." />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;700&family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">

    <link rel="icon" href="assets/heart.svg" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body class="site-locked">
    <div id="hearts-bg" aria-hidden="true"></div>
    <!-- Gate miniâ€‘game overlay -->
    <div id="gate" class="gate" aria-modal="true" role="dialog" aria-label="Unlock the surprise">
      <div class="gate-card">
        <h2 class="gate-title">London Taxi Dash ðŸš•ðŸ’˜</h2>
        <canvas id="gateCanvas" width="900" height="520" aria-label="heart catch game"></canvas>
        <div class="gate-ui">
          <button id="gateStart" class="btn yes">Start</button>
          <div class="gate-status" id="gateStatus"></div>
        </div>

    <!-- Explore modal shown after train finishes -->
    <div id="explorePrompt" class="song-prompt" aria-modal="true" role="dialog" aria-label="More to explore" style="display:none">
      <div class="prompt-card">
        <p class="prompt-text"><strong>More to explore...</strong></p>
        <p class="prompt-text">Together for <span id="liveTogether">â€”</span></p>
        <div class="prompt-actions">
          <button id="exploreClose" class="btn yes">Keep exploring</button>
        </div>
      </div>
    </div>

    <!-- Song prompt modal shown after game success -->
    <div id="songPrompt" class="song-prompt" aria-modal="true" role="dialog" aria-label="Play a song?" style="display:none">
      <div class="prompt-card">
        <p class="prompt-text">Before we start... I want to play you a song thatâ€™s close to your heart. ðŸ’—</p>
        <div class="prompt-actions">
          <button id="songYes" class="btn yes">Yes</button>
          <button id="songDefYes" class="btn no">Definitely yes</button>
        </div>
      </div>
    </div>
        <!-- Gate intro bottom sheet -->
        <div id="gateIntro" class="gate-intro" role="region" aria-label="How to play">
          <div class="intro-content">
            <img id="introAvatar" class="intro-avatar" src="assets/heart.svg" alt="me" />
            <div class="intro-bubble">
              <p class="intro-title">Before we beginâ€¦</p>
              <p class="intro-text">Drive the London taxi with arrow keys (or drag on mobile). Collect <strong>7 hearts</strong> in <strong>30s</strong>. Watch out for pigeons â€” theyâ€™re cheeky! Unlock to see my surprise. ðŸ’˜</p>
              <button id="introOk" class="btn yes small">Got it!</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <header class="site-header">
      <div class="container">
        <h1 class="logo">ðŸ’• For You</h1>
        <button id="musicToggle" class="music-toggle" aria-label="Toggle background music" title="Play music" data-src="assets/Dave-Raindance-Ft-Tems-(HipHopKit.com).mp3">â™ª</button>
      </div>
    </header>

    <main>
      <section class="hero container" id="hero">
        <img class="hero-emoji" src="assets/heart.svg" alt="heart" />
        <h2 class="title">Will you be my Valentine?</h2>
        <div class="cta-row">
          <button id="yesBtn" class="btn yes">Yes</button>
          <button id="noBtn" class="btn no" aria-label="No (but it's sneaky)">No</button>
        </div>
      </section>

      <!-- Lightbox for enlarged photo -->
      <div id="lightbox" class="lightbox" aria-hidden="true" role="dialog" aria-label="Photo viewer">
        <button id="lbClose" class="lb-close" aria-label="Close">âœ•</button>
        <div class="lb-inner">
          <img id="lbImg" alt="enlarged" />
          <div id="lbCap" class="lb-cap"></div>
          <div class="lb-arrows">
            <button id="lbPrev" class="lb-arrow" aria-label="Previous">â—€</button>
            <button id="lbNext" class="lb-arrow" aria-label="Next">â–¶</button>
          </div>
        </div>
      </div>

      <section class="london-banner post-yes" id="london" aria-label="London banner">
        <div class="container">
          <h3 class="london-title">It all began in London ðŸ‡¬ðŸ‡§</h3>
          <p class="subtitle">Where two strangers felt a little extra magic under cloudy skies.</p>
          <div class="skyline" aria-hidden="true"></div>
          <!-- Mini map of our spots -->
          <div class="mini-map" id="miniMap" aria-label="Our London spots">
            <div class="map-rail"></div>
            <div class="progress" id="mapProgress" aria-hidden="true"></div>
            <div class="train" id="tubeTrain" aria-hidden="true" title="Our little tube">
              <div class="car engine"><span class="chimney"></span></div>
              <div class="car"></div>
              <div class="car"></div>
            </div>
            <button class="pin" data-name="Nordic Bar" data-src="assets/images/places/nordic-bar.jpg" style="--x:8%">
              <span>Nordic Bar</span>
            </button>
            <button class="pin" data-name="Albert Schloss" data-src="assets/images/places/albert-schloss.jpg" style="--x:22%">
              <span>Albert Schloss</span>
            </button>
            <button class="pin" data-name="Chapter London Bridge" data-src="assets/images/places/chapter-london-bridge.jpg" style="--x:38%">
              <span>Chapter London Bridge</span>
            </button>
            <button class="pin" data-name="Hyde Park Winter Wonderland" data-src="assets/images/places/winter-wonderland.jpg" style="--x:54%">
              <span>Winter Wonderland</span>
            </button>
            <button class="pin" data-name="Marlin Apartments" data-src="assets/images/places/marlin-apartments.jpg" style="--x:68%">
              <span>Marlin Apartments</span>
            </button>
            <button class="pin" data-name="Camden Market" data-src="assets/images/places/camden-market.jpg" style="--x:82%">
              <span>Camden Market</span>
            </button>
            <button class="pin" data-name="Vault Tower Bridge" data-src="assets/images/places/vault-tower-bridge.jpg" style="--x:94%">
              <span>Vault Tower Bridge</span>
            </button>
          </div>
        </div>
      </section>

      <section class="stats container post-yes" id="stats">
        <div class="stat-card">
          <div class="stat-number together" data-live-together>0d 00:00:00.000</div>
        </div>
      </section>

      <section class="storybook container post-yes" id="story">
        <h3>Our Infamous Lore</h3>
        <div class="book" aria-label="flipbook">
          <button class="nav prev" id="prevPage" aria-label="Previous">â€¹</button>
          <div class="pages" id="pages">
            <article class="page">
              <h4>Chapter 1 â€” A city called <span class="city">London</span></h4>
              <p>it was so unexpected to meet a person like you on this london trip and i will be forever greatful for that . have to say its gotta be one of the most intresting and fun london tripo ever iykyk</p>
            </article>
            <article class="page">
              <h4>Chapter 2 â€” The quiet heart</h4>
              <p>I tried to play it cool, but I was shy and starstruck. Still, I couldnâ€™t stop thinking about you.</p>
            </article>
            <article class="page">
              <h4>Chapter 3 â€” 11pm texts</h4>
              <p>That night, I sent a message. Then another. Then we discovered we talk in our own language.</p>
            </article>
            <article class="page">
              <h4>Chapter 4 â€” Suddenly, us</h4>
              <p>Days turned into plans, plans into memories. One month later, Iâ€™m here asking a simple question...</p>
            </article>
          </div>
          <button class="nav next" id="nextPage" aria-label="Next">â€º</button>
        </div>
        <div class="dots" id="pageDots" aria-label="Page indicators"></div>
      </section>

      <section class="carousel container post-yes" id="photoCarousel" role="listbox" aria-label="Heart path carousel">
        <h3>A few memories we made</h3>
        <h4 class="subnote">(Ps. More to come)</h4>
        <p class="subtitle">Hover or drag to explore. The closest photo grows with a soft heart glow.</p>
        <div class="carousel-stage">
          <div id="carouselTrack" class="carousel-track" aria-live="polite"></div>
        </div>
        <div class="carousel-ctrls">
          <button id="carPrev" class="btn ghost" aria-label="Previous">â—€</button>
          <button id="carNext" class="btn ghost" aria-label="Next">â–¶</button>
        </div>
        <p class="micro-hint">Photos come from <code>galleryImages</code> in <code>script.js</code>.</p>
      </section>

      <section id="celebration" class="celebration container post-yes" hidden>
        <h3>Yay! Best decision ever! ðŸŽ‰</h3>
        <p>Prepare for excessive cuddles, cheesy jokes, and a lifetime supply of snacks.</p>
        <button id="replayBtn" class="btn ghost">Replay hearts</button>
      </section>

      <section class="gallery container post-yes" id="gallery">
        <h3>Our cute memories</h3>
        <p class="subtitle">Add your own photos in <code>assets/images/</code> and list them in <code>script.js</code>.</p>
        <div class="grid" id="galleryGrid" aria-live="polite"></div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container">
        <p></p>
      </div>
    </footer>

    <canvas id="confettiCanvas" aria-hidden="true"></canvas>
    <script src="script.js"></script>
  </body>
</html>
